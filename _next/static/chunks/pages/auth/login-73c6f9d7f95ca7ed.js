(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344,533],{2505:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(7867)}])},7152:function(e,r,s){"use strict";let t,n;s.d(r,{Cp:function(){return g},F3:function(){return f},TX:function(){return _},WZ:function(){return l},bE:function(){return d},xU:function(){return h}});var o=s(2370),a=s(3977),c=s(9024);try{t=0===(0,a.C6)().length?(0,a.ZF)(c.Z):(0,a.C6)()[0],n=(0,o.v0)(t)}catch(e){console.error("Firebase 초기화 오류:",e)}let i="sanctions_search_auth_token",u="sanctions_search_user_info",l=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let s=await (0,o.e5)(n,e,r);if(s.user){let e={uid:s.user.uid,email:s.user.email,lastLogin:new Date().toISOString()};localStorage.setItem(u,JSON.stringify(e))}return{success:!0,user:s.user}}catch(r){console.error("로그인 오류:",r.code,r.message);let e="로그인에 실패했습니다.";return"auth/user-not-found"===r.code||"auth/wrong-password"===r.code?e="이메일 또는 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code?e="너무 많은 시도로 인해 계정이 일시적으로 잠겼습니다. 나중에 다시 시도해주세요.":"auth/user-disabled"===r.code&&(e="계정이 비활성화되었습니다. 관리자에게 문의하세요."),{success:!1,error:e}}},d=async function(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let t=(await (0,o.Xb)(n,e,r)).user;return s&&await (0,o.ck)(t,{displayName:s}),{success:!0,user:t}}catch(r){console.error("회원가입 오류:",r.code,r.message);let e="회원가입 중 오류가 발생했습니다.";return"auth/email-already-in-use"===r.code?e="이미 사용 중인 이메일 주소입니다.":"auth/invalid-email"===r.code?e="유효하지 않은 이메일 형식입니다.":"auth/weak-password"===r.code&&(e="비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}},_=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1};try{return await (0,o.w7)(n),localStorage.removeItem(i),localStorage.removeItem(u),{success:!0}}catch(e){return console.error("로그아웃 오류:",e),{success:!1,error:"로그아웃 중 오류가 발생했습니다."}}},h=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let e=n.currentUser;if(!e)return{success:!1,error:"로그인된 사용자가 없습니다."};return await (0,o.h8)(e),localStorage.removeItem(i),localStorage.removeItem(u),{success:!0}}catch(r){console.error("계정 삭제 오류:",r);let e="계정 삭제 중 오류가 발생했습니다.";return"auth/requires-recent-login"===r.code&&(e="보안을 위해 다시 로그인한 후 계정 삭제를 진행해주세요."),{success:!1,error:e}}},f=async e=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let r=n.currentUser;if(!r)return{success:!1,error:"인증된 사용자가 없습니다."};let s=o.w9.credential(r.email,e);return await (0,o.aF)(r,s),{success:!0}}catch(r){console.error("재인증 오류:",r.code,r.message);let e="재인증에 실패했습니다.";return"auth/wrong-password"===r.code?e="현재 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code&&(e="너무 많은 시도로 인해 일시적으로 차단되었습니다. 나중에 다시 시도해주세요."),{success:!1,error:e}}},g=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let s=await f(e);if(!s.success)return s;let t=n.currentUser;return await (0,o.gQ)(t,r),{success:!0,message:"비밀번호가 성공적으로 변경되었습니다."}}catch(r){console.error("비밀번호 변경 오류:",r.code,r.message);let e="비밀번호 변경에 실패했습니다.";return"auth/weak-password"===r.code&&(e="새 비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}}},9024:function(e,r){"use strict";r.Z={apiKey:"AIzaSyCu82sysG5VTNHpKEvEnT-A33B8EwBKT7A",authDomain:"sp-2504.firebaseapp.com",projectId:"sp-2504",storageBucket:"sp-2504.appspot.com",messagingSenderId:"107459326789618110284",appId:"1:107459326789618110284:web:e428f3b2f2a8c5d04fef1a"}},4533:function(e,r,s){"use strict";let t,n;s.r(r),s.d(r,{AuthProvider:function(){return d},useAuth:function(){return _}});var o=s(5893),a=s(7294),c=s(2370),i=s(3977),u=s(9024);let l=(0,a.createContext)({user:null,loading:!0,logout:async()=>{}});function d(e){let{children:r}=e,[s,d]=(0,a.useState)(null),[_,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{t||(t=0===(0,i.C6)().length?(0,i.ZF)(u.Z):(0,i.C6)()[0],n=(0,c.v0)(t))}catch(e){console.error("Firebase 초기화 오류:",e),h(!1)}},[]);let f=async()=>{if(n)try{await (0,c.w7)(n),d(null),localStorage.removeItem("sanctions_search_auth_token"),localStorage.removeItem("sanctions_search_user_info")}catch(e){console.error("로그아웃 오류:",e)}};return(0,a.useEffect)(()=>{if(!n)return h(!1),()=>{};let e=(0,c.Aj)(n,e=>{if(d(e),h(!1),e){let r={uid:e.uid,email:e.email,lastLogin:new Date().toISOString()};localStorage.setItem("sanctions_search_user_info",JSON.stringify(r))}});return()=>e()},[n]),(0,o.jsx)(l.Provider,{value:{user:s,loading:_,logout:f},children:r})}let _=()=>(0,a.useContext)(l)},7867:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return f}});var t=s(5893),n=s(7294),o=s(1163),a=s(1664),c=s.n(a),i=s(9008),u=s.n(i),l=s(7152),d=s(4533),_=s(3186),h=s.n(_);function f(){let[e,r]=(0,n.useState)(""),[s,a]=(0,n.useState)(""),[i,_]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),w=(0,o.useRouter)(),{user:x,loading:y}=(0,d.useAuth)();(0,n.useEffect)(()=>{"true"===w.query.registered&&_("회원가입이 완료되었습니다. 이메일과 비밀번호로 로그인해주세요.")},[w.query]),(0,n.useEffect)(()=>{!y&&x&&(console.log("이미 로그인한 사용자를 메인 페이지로 리디렉션합니다."),w.push("/"))},[x,y,w]);let b=async r=>{if(r.preventDefault(),!e||!s){_("이메일과 비밀번호를 모두 입력해주세요.");return}try{g(!0),_("");let r=await (0,l.WZ)(e,s);r.success?(console.log("로그인 성공, 메인 페이지로 이동합니다."),w.push("/")):_(r.error)}catch(e){console.error("로그인 오류:",e),_("로그인 중 오류가 발생했습니다. 나중에 다시 시도해주세요.")}finally{g(!1)}};return(0,t.jsxs)("div",{className:h().container,children:[(0,t.jsxs)(u(),{children:[(0,t.jsx)("title",{children:"로그인 - 제재 정보 검색 시스템"}),(0,t.jsx)("meta",{name:"description",content:"제재 정보 검색 시스템 로그인 페이지"})]}),(0,t.jsxs)("div",{className:h().loginBox,children:[(0,t.jsx)("h1",{className:h().title,children:"제재 정보 검색 시스템"}),(0,t.jsx)("h2",{className:h().subtitle,children:"로그인"}),i&&(0,t.jsx)("p",{className:h().error,children:i}),(0,t.jsxs)("form",{className:h().form,onSubmit:b,children:[(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"email",children:"이메일"}),(0,t.jsx)("input",{id:"email",type:"email",className:h().input,value:e,onChange:e=>r(e.target.value),disabled:f,placeholder:"이메일 주소 입력",required:!0})]}),(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"password",children:"비밀번호"}),(0,t.jsx)("input",{id:"password",type:"password",className:h().input,value:s,onChange:e=>a(e.target.value),disabled:f,placeholder:"비밀번호 입력",required:!0})]}),(0,t.jsx)("button",{type:"submit",className:h().button,disabled:f,children:f?"로그인 중...":"로그인"})]}),(0,t.jsxs)("div",{className:h().linkContainer,children:[(0,t.jsx)("div",{className:h().linkGroup,children:(0,t.jsx)(c(),{href:"/auth/register",className:h().link,children:"계정이 없으신가요? 회원가입"})}),(0,t.jsxs)("div",{className:h().linkGroup,children:[(0,t.jsx)("button",{onClick:()=>{p(!m)},className:h().linkButton,children:"회원탈퇴를 원하시나요?"}),m&&(0,t.jsxs)("div",{className:h().deleteInfo,children:[(0,t.jsx)("p",{children:"회원탈퇴는 로그인 후 가능합니다."}),(0,t.jsxs)("p",{children:["로그인 후 ",(0,t.jsx)("span",{className:h().highlight,children:"마이페이지 > 회원탈퇴"}),"를 이용해주세요."]}),(0,t.jsx)(c(),{href:"/auth/delete-account",className:h().deleteLink,children:"회원탈퇴 페이지로 이동"})]})]})]})]})]})}},3186:function(e){e.exports={container:"Login_container__DPp2Z",loginBox:"Login_loginBox__KZSS_",title:"Login_title__S9Xbe",subtitle:"Login_subtitle__LUyEd",form:"Login_form__F7zp_",formGroup:"Login_formGroup__vLoUr",input:"Login_input__GbcAp",button:"Login_button__BuBqT",error:"Login_error__2xYo0",success:"Login_success__ItpRA",warning:"Login_warning__R0uVy",linkContainer:"Login_linkContainer__oMYKJ",linkGroup:"Login_linkGroup___Cfss",link:"Login_link__C0M84",linkButton:"Login_linkButton__MOlfV",deleteInfo:"Login_deleteInfo__hoPLD",highlight:"Login_highlight__AQ1sg",deleteLink:"Login_deleteLink__lrIb_",separator:"Login_separator__1kvkc",deleteButton:"Login_deleteButton__swC0p"}}},function(e){e.O(0,[425,690,814,888,774,179],function(){return e(e.s=2505)}),_N_E=e.O()}]);