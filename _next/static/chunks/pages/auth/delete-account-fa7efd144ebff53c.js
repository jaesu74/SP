(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305,533],{2449:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/delete-account",function(){return t(5858)}])},7152:function(e,r,t){"use strict";let s,n;t.d(r,{Cp:function(){return g},F3:function(){return f},TX:function(){return _},WZ:function(){return l},bE:function(){return d},xU:function(){return h}});var o=t(2370),c=t(3977),a=t(9024);try{s=0===(0,c.C6)().length?(0,c.ZF)(a.Z):(0,c.C6)()[0],n=(0,o.v0)(s)}catch(e){console.error("Firebase 초기화 오류:",e)}let i="sanctions_search_auth_token",u="sanctions_search_user_info",l=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let t=await (0,o.e5)(n,e,r);if(t.user){let e={uid:t.user.uid,email:t.user.email,lastLogin:new Date().toISOString()};localStorage.setItem(u,JSON.stringify(e))}return{success:!0,user:t.user}}catch(r){console.error("로그인 오류:",r.code,r.message);let e="로그인에 실패했습니다.";return"auth/user-not-found"===r.code||"auth/wrong-password"===r.code?e="이메일 또는 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code?e="너무 많은 시도로 인해 계정이 일시적으로 잠겼습니다. 나중에 다시 시도해주세요.":"auth/user-disabled"===r.code&&(e="계정이 비활성화되었습니다. 관리자에게 문의하세요."),{success:!1,error:e}}},d=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let s=(await (0,o.Xb)(n,e,r)).user;return t&&await (0,o.ck)(s,{displayName:t}),{success:!0,user:s}}catch(r){console.error("회원가입 오류:",r.code,r.message);let e="회원가입 중 오류가 발생했습니다.";return"auth/email-already-in-use"===r.code?e="이미 사용 중인 이메일 주소입니다.":"auth/invalid-email"===r.code?e="유효하지 않은 이메일 형식입니다.":"auth/weak-password"===r.code&&(e="비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}},_=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1};try{return await (0,o.w7)(n),localStorage.removeItem(i),localStorage.removeItem(u),{success:!0}}catch(e){return console.error("로그아웃 오류:",e),{success:!1,error:"로그아웃 중 오류가 발생했습니다."}}},h=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let e=n.currentUser;if(!e)return{success:!1,error:"로그인된 사용자가 없습니다."};return await (0,o.h8)(e),localStorage.removeItem(i),localStorage.removeItem(u),{success:!0}}catch(r){console.error("계정 삭제 오류:",r);let e="계정 삭제 중 오류가 발생했습니다.";return"auth/requires-recent-login"===r.code&&(e="보안을 위해 다시 로그인한 후 계정 삭제를 진행해주세요."),{success:!1,error:e}}},f=async e=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let r=n.currentUser;if(!r)return{success:!1,error:"인증된 사용자가 없습니다."};let t=o.w9.credential(r.email,e);return await (0,o.aF)(r,t),{success:!0}}catch(r){console.error("재인증 오류:",r.code,r.message);let e="재인증에 실패했습니다.";return"auth/wrong-password"===r.code?e="현재 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code&&(e="너무 많은 시도로 인해 일시적으로 차단되었습니다. 나중에 다시 시도해주세요."),{success:!1,error:e}}},g=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let t=await f(e);if(!t.success)return t;let s=n.currentUser;return await (0,o.gQ)(s,r),{success:!0,message:"비밀번호가 성공적으로 변경되었습니다."}}catch(r){console.error("비밀번호 변경 오류:",r.code,r.message);let e="비밀번호 변경에 실패했습니다.";return"auth/weak-password"===r.code&&(e="새 비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}}},9024:function(e,r){"use strict";r.Z={apiKey:"AIzaSyCu82sysG5VTNHpKEvEnT-A33B8EwBKT7A",authDomain:"sp-2504.firebaseapp.com",projectId:"sp-2504",storageBucket:"sp-2504.appspot.com",messagingSenderId:"107459326789618110284",appId:"1:107459326789618110284:web:e428f3b2f2a8c5d04fef1a"}},4533:function(e,r,t){"use strict";let s,n;t.r(r),t.d(r,{AuthProvider:function(){return d},useAuth:function(){return _}});var o=t(5893),c=t(7294),a=t(2370),i=t(3977),u=t(9024);let l=(0,c.createContext)({user:null,loading:!0,logout:async()=>{}});function d(e){let{children:r}=e,[t,d]=(0,c.useState)(null),[_,h]=(0,c.useState)(!0);(0,c.useEffect)(()=>{try{s||(s=0===(0,i.C6)().length?(0,i.ZF)(u.Z):(0,i.C6)()[0],n=(0,a.v0)(s))}catch(e){console.error("Firebase 초기화 오류:",e),h(!1)}},[]);let f=async()=>{if(n)try{await (0,a.w7)(n),d(null),localStorage.removeItem("sanctions_search_auth_token"),localStorage.removeItem("sanctions_search_user_info")}catch(e){console.error("로그아웃 오류:",e)}};return(0,c.useEffect)(()=>{if(!n)return h(!1),()=>{};let e=(0,a.Aj)(n,e=>{if(d(e),h(!1),e){let r={uid:e.uid,email:e.email,lastLogin:new Date().toISOString()};localStorage.setItem("sanctions_search_user_info",JSON.stringify(r))}});return()=>e()},[n]),(0,o.jsx)(l.Provider,{value:{user:t,loading:_,logout:f},children:r})}let _=()=>(0,c.useContext)(l)},5858:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var s=t(5893),n=t(7294),o=t(1163),c=t(1664),a=t.n(c),i=t(9008),u=t.n(i),l=t(7152),d=t(4533),_=t(3186),h=t.n(_);function f(){let[e,r]=(0,n.useState)(""),[t,c]=(0,n.useState)(""),[i,_]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),w=(0,o.useRouter)(),{user:x,loading:y}=(0,d.useAuth)();(0,n.useEffect)(()=>{y||x||(console.log("인증되지 않은 사용자를 로그인 페이지로 리디렉션합니다."),w.push("/auth/login"))},[x,y,w]);let b=async e=>{if(e.preventDefault(),"계정삭제확인"!==t){_("확인 텍스트가 일치하지 않습니다.");return}g(!0),_("");try{let e=await (0,l.xU)();e.success?(console.log("계정 삭제 성공"),p(!0),setTimeout(()=>{w.push("/auth/login")},3e3)):_(e.error)}catch(e){console.error("계정 삭제 오류:",e),_("계정 삭제 중 오류가 발생했습니다. 나중에 다시 시도해주세요.")}finally{g(!1)}};return y?(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)("p",{children:"인증 정보를 확인하는 중..."})}):x?(0,s.jsxs)("div",{className:h().container,children:[(0,s.jsxs)(u(),{children:[(0,s.jsx)("title",{children:"회원탈퇴 - 제재 정보 검색 시스템"}),(0,s.jsx)("meta",{name:"description",content:"제재 정보 검색 시스템 회원탈퇴 페이지"})]}),(0,s.jsxs)("div",{className:h().loginBox,children:[(0,s.jsx)("h1",{className:h().title,children:"제재 정보 검색 시스템"}),(0,s.jsx)("h2",{className:h().subtitle,children:"회원탈퇴"}),m?(0,s.jsxs)("div",{className:h().success,children:[(0,s.jsx)("p",{children:"계정이 성공적으로 삭제되었습니다."}),(0,s.jsx)("p",{children:"잠시 후 로그인 페이지로 이동합니다..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:h().warning,children:[(0,s.jsx)("p",{children:"⚠️ 주의: 계정을 삭제하면 되돌릴 수 없습니다."}),(0,s.jsx)("p",{children:"모든 개인 데이터가 영구적으로 삭제됩니다."})]}),i&&(0,s.jsx)("p",{className:h().error,children:i}),(0,s.jsxs)("form",{className:h().form,onSubmit:b,children:[(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsx)("label",{htmlFor:"confirmText",children:"계정 삭제를 확인하려면 '계정삭제확인'을 입력하세요"}),(0,s.jsx)("input",{id:"confirmText",type:"text",className:h().input,value:t,onChange:e=>c(e.target.value),disabled:f,placeholder:"계정삭제확인"})]}),(0,s.jsx)("button",{type:"submit",className:h().deleteButton,disabled:f||"계정삭제확인"!==t,children:f?"처리 중...":"계정 삭제"}),(0,s.jsx)("div",{className:h().linkContainer,children:(0,s.jsx)(a(),{href:"/",className:h().link,children:"취소하고 메인 페이지로 돌아가기"})})]})]})]})]}):null}},3186:function(e){e.exports={container:"Login_container__DPp2Z",loginBox:"Login_loginBox__KZSS_",title:"Login_title__S9Xbe",subtitle:"Login_subtitle__LUyEd",form:"Login_form__F7zp_",formGroup:"Login_formGroup__vLoUr",input:"Login_input__GbcAp",button:"Login_button__BuBqT",error:"Login_error__2xYo0",success:"Login_success__ItpRA",warning:"Login_warning__R0uVy",linkContainer:"Login_linkContainer__oMYKJ",linkGroup:"Login_linkGroup___Cfss",link:"Login_link__C0M84",linkButton:"Login_linkButton__MOlfV",deleteInfo:"Login_deleteInfo__hoPLD",highlight:"Login_highlight__AQ1sg",deleteLink:"Login_deleteLink__lrIb_",separator:"Login_separator__1kvkc",deleteButton:"Login_deleteButton__swC0p"}}},function(e){e.O(0,[425,690,814,888,774,179],function(){return e(e.s=2449)}),_N_E=e.O()}]);