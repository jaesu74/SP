(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461,533],{3829:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return s(5911)}])},7152:function(e,r,s){"use strict";let t,n;s.d(r,{Cp:function(){return f},F3:function(){return _},TX:function(){return m},WZ:function(){return u},bE:function(){return d},xU:function(){return h}});var o=s(2370),a=s(3977),i=s(9024);try{t=0===(0,a.C6)().length?(0,a.ZF)(i.Z):(0,a.C6)()[0],n=(0,o.v0)(t)}catch(e){console.error("Firebase 초기화 오류:",e)}let c="sanctions_search_auth_token",l="sanctions_search_user_info",u=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let s=await (0,o.e5)(n,e,r);if(s.user){let e={uid:s.user.uid,email:s.user.email,lastLogin:new Date().toISOString()};localStorage.setItem(l,JSON.stringify(e))}return{success:!0,user:s.user}}catch(r){console.error("로그인 오류:",r.code,r.message);let e="로그인에 실패했습니다.";return"auth/user-not-found"===r.code||"auth/wrong-password"===r.code?e="이메일 또는 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code?e="너무 많은 시도로 인해 계정이 일시적으로 잠겼습니다. 나중에 다시 시도해주세요.":"auth/user-disabled"===r.code&&(e="계정이 비활성화되었습니다. 관리자에게 문의하세요."),{success:!1,error:e}}},d=async function(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let t=(await (0,o.Xb)(n,e,r)).user;return s&&await (0,o.ck)(t,{displayName:s}),{success:!0,user:t}}catch(r){console.error("회원가입 오류:",r.code,r.message);let e="회원가입 중 오류가 발생했습니다.";return"auth/email-already-in-use"===r.code?e="이미 사용 중인 이메일 주소입니다.":"auth/invalid-email"===r.code?e="유효하지 않은 이메일 형식입니다.":"auth/weak-password"===r.code&&(e="비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}},m=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1};try{return await (0,o.w7)(n),localStorage.removeItem(c),localStorage.removeItem(l),{success:!0}}catch(e){return console.error("로그아웃 오류:",e),{success:!1,error:"로그아웃 중 오류가 발생했습니다."}}},h=async()=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let e=n.currentUser;if(!e)return{success:!1,error:"로그인된 사용자가 없습니다."};return await (0,o.h8)(e),localStorage.removeItem(c),localStorage.removeItem(l),{success:!0}}catch(r){console.error("계정 삭제 오류:",r);let e="계정 삭제 중 오류가 발생했습니다.";return"auth/requires-recent-login"===r.code&&(e="보안을 위해 다시 로그인한 후 계정 삭제를 진행해주세요."),{success:!1,error:e}}},_=async e=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let r=n.currentUser;if(!r)return{success:!1,error:"인증된 사용자가 없습니다."};let s=o.w9.credential(r.email,e);return await (0,o.aF)(r,s),{success:!0}}catch(r){console.error("재인증 오류:",r.code,r.message);let e="재인증에 실패했습니다.";return"auth/wrong-password"===r.code?e="현재 비밀번호가 올바르지 않습니다.":"auth/too-many-requests"===r.code&&(e="너무 많은 시도로 인해 일시적으로 차단되었습니다. 나중에 다시 시도해주세요."),{success:!1,error:e}}},f=async(e,r)=>{if(!n)return console.warn("서버 사이드 렌더링 또는 Firebase가 초기화되지 않았습니다."),{success:!1,error:"인증 서비스를 사용할 수 없습니다."};try{let s=await _(e);if(!s.success)return s;let t=n.currentUser;return await (0,o.gQ)(t,r),{success:!0,message:"비밀번호가 성공적으로 변경되었습니다."}}catch(r){console.error("비밀번호 변경 오류:",r.code,r.message);let e="비밀번호 변경에 실패했습니다.";return"auth/weak-password"===r.code&&(e="새 비밀번호가 너무 약합니다. 6자 이상 입력해주세요."),{success:!1,error:e}}}},9024:function(e,r){"use strict";r.Z={apiKey:"AIzaSyCu82sysG5VTNHpKEvEnT-A33B8EwBKT7A",authDomain:"sp-2504.firebaseapp.com",projectId:"sp-2504",storageBucket:"sp-2504.appspot.com",messagingSenderId:"107459326789618110284",appId:"1:107459326789618110284:web:e428f3b2f2a8c5d04fef1a"}},4533:function(e,r,s){"use strict";let t,n;s.r(r),s.d(r,{AuthProvider:function(){return d},useAuth:function(){return m}});var o=s(5893),a=s(7294),i=s(2370),c=s(3977),l=s(9024);let u=(0,a.createContext)({user:null,loading:!0,logout:async()=>{}});function d(e){let{children:r}=e,[s,d]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{t||(t=0===(0,c.C6)().length?(0,c.ZF)(l.Z):(0,c.C6)()[0],n=(0,i.v0)(t))}catch(e){console.error("Firebase 초기화 오류:",e),h(!1)}},[]);let _=async()=>{if(n)try{await (0,i.w7)(n),d(null),localStorage.removeItem("sanctions_search_auth_token"),localStorage.removeItem("sanctions_search_user_info")}catch(e){console.error("로그아웃 오류:",e)}};return(0,a.useEffect)(()=>{if(!n)return h(!1),()=>{};let e=(0,i.Aj)(n,e=>{if(d(e),h(!1),e){let r={uid:e.uid,email:e.email,lastLogin:new Date().toISOString()};localStorage.setItem("sanctions_search_user_info",JSON.stringify(r))}});return()=>e()},[n]),(0,o.jsx)(u.Provider,{value:{user:s,loading:m,logout:_},children:r})}let m=()=>(0,a.useContext)(u)},5911:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return _}});var t=s(5893),n=s(7294),o=s(1163),a=s(1664),i=s.n(a),c=s(9008),l=s.n(c),u=s(7152),d=s(4533),m=s(3186),h=s.n(m);function _(){let[e,r]=(0,n.useState)({name:"",email:"",password:"",confirmPassword:""}),[s,a]=(0,n.useState)(""),[c,m]=(0,n.useState)(!1),[_,f]=(0,n.useState)(!1),g=(0,o.useRouter)(),{user:p,loading:w}=(0,d.useAuth)();(0,n.useEffect)(()=>{!w&&p&&(console.log("이미 로그인한 사용자를 메인 페이지로 리디렉션합니다."),g.push("/"))},[p,w,g]);let b=e=>{let{name:s,value:t}=e.target;r(e=>({...e,[s]:t}))},x=async r=>{if(r.preventDefault(),!e.name||!e.email||!e.password||!e.confirmPassword){a("모든 필드를 입력해주세요.");return}if(e.password!==e.confirmPassword){a("비밀번호가 일치하지 않습니다.");return}if(e.password.length<6){a("비밀번호는 최소 6자 이상이어야 합니다.");return}m(!0),a("");try{let r=await (0,u.bE)(e.email,e.password,e.name);r.success?(console.log("회원가입 성공"),f(!0),setTimeout(()=>{g.push("/auth/login?registered=true")},3e3)):a(r.error)}catch(e){console.error("회원가입 오류:",e),a("회원가입 중 오류가 발생했습니다. 나중에 다시 시도해주세요.")}finally{m(!1)}};return(0,t.jsxs)("div",{className:h().container,children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:"회원가입 - 제재 정보 검색 시스템"}),(0,t.jsx)("meta",{name:"description",content:"제재 정보 검색 시스템 회원가입 페이지"})]}),(0,t.jsxs)("div",{className:h().loginBox,children:[(0,t.jsx)("h1",{className:h().title,children:"제재 정보 검색 시스템"}),(0,t.jsx)("h2",{className:h().subtitle,children:"회원가입"}),_?(0,t.jsxs)("div",{className:h().success,children:[(0,t.jsx)("p",{children:"회원가입이 완료되었습니다!"}),(0,t.jsx)("p",{children:"잠시 후 로그인 페이지로 이동합니다..."})]}):(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("p",{className:h().error,children:s}),(0,t.jsxs)("form",{className:h().form,onSubmit:x,children:[(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"name",children:"이름"}),(0,t.jsx)("input",{id:"name",name:"name",type:"text",className:h().input,value:e.name,onChange:b,disabled:c,placeholder:"이름 입력",required:!0})]}),(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"email",children:"이메일"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",className:h().input,value:e.email,onChange:b,disabled:c,placeholder:"이메일 주소 입력",required:!0})]}),(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"password",children:"비밀번호"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",className:h().input,value:e.password,onChange:b,disabled:c,placeholder:"비밀번호 입력 (6자 이상)",required:!0})]}),(0,t.jsxs)("div",{className:h().formGroup,children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",children:"비밀번호 확인"}),(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",className:h().input,value:e.confirmPassword,onChange:b,disabled:c,placeholder:"비밀번호 재입력",required:!0})]}),(0,t.jsx)("button",{type:"submit",className:h().button,disabled:c,children:c?"처리 중...":"회원가입"}),(0,t.jsx)("div",{className:h().linkContainer,children:(0,t.jsx)(i(),{href:"/auth/login",className:h().link,children:"이미 계정이 있으신가요? 로그인"})})]})]})]})]})}},3186:function(e){e.exports={container:"Login_container__DPp2Z",loginBox:"Login_loginBox__KZSS_",title:"Login_title__S9Xbe",subtitle:"Login_subtitle__LUyEd",form:"Login_form__F7zp_",formGroup:"Login_formGroup__vLoUr",input:"Login_input__GbcAp",button:"Login_button__BuBqT",error:"Login_error__2xYo0",success:"Login_success__ItpRA",warning:"Login_warning__R0uVy",linkContainer:"Login_linkContainer__oMYKJ",linkGroup:"Login_linkGroup___Cfss",link:"Login_link__C0M84",linkButton:"Login_linkButton__MOlfV",deleteInfo:"Login_deleteInfo__hoPLD",highlight:"Login_highlight__AQ1sg",deleteLink:"Login_deleteLink__lrIb_",separator:"Login_separator__1kvkc",deleteButton:"Login_deleteButton__swC0p"}}},function(e){e.O(0,[425,690,814,888,774,179],function(){return e(e.s=3829)}),_N_E=e.O()}]);